{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","personService","getAll","axios","get","then","response","data","createPerson","personObject","post","updatePerson","id","urlUpdate","put","deletePerson","urlDelete","delete","Name","person","deleteContact","name","number","onClick","Persons","persons","filter","f","toLowerCase","indexOf","map","p","Filter","onChange","value","placeholder","PersonForm","setName","setNum","addContact","onSubmit","type","Notification","message","flag","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setMessage","setFlag","setFilter","useEffect","console","log","initialPersons","length","e","target","preventDefault","names","window","confirm","updatedPersons","find","setTimeout","catch","error","personCreated","concat","personToDelete","err","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4be9bb53.chunk.js","sourcesContent":["import axios from \"axios\";\r\n//const baseUrl = 'http://localhost:3001/api/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst createPerson = (personObject) => {\r\n    const request = axios.post(baseUrl, personObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst updatePerson = (id, personObject) => {\r\n    const urlUpdate = `${baseUrl}/${id}`\r\n    const request = axios.put(urlUpdate, personObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const urlDelete = `${baseUrl}/${id}`\r\n    const request = axios.delete(urlDelete)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst personService = { getAll , createPerson, updatePerson, deletePerson }\r\n\r\n\r\nexport default personService\r\n","import React, {useState, useEffect} from \"react\";\nimport personService from './services/persons'\n\nconst Name = ({person, deleteContact}) => {\n  return (\n    <div>\n      {person.name} {person.number} <button onClick={() => deleteContact(person.id)}>delete</button>\n    </div>\n  )\n}\n\n\nconst Persons = ({persons, filter, deleteContact}) => {\n  return (\n    <>\n      <div>\n        {persons.filter(f => f.name.toLowerCase().indexOf(filter) !== -1)\n          .map(p => <Name key={p.id} person={p} deleteContact={deleteContact}/>)\n        } \n      </div>\n    </>\n  )\n}\n\nconst Filter = ({filter,onChange}) => {\n  return(\n    <div>\n      filter shown with <input value={filter} onChange={onChange}  placeholder={'Search...'}/>\n    </div>\n  )\n}\n\nconst PersonForm = ({name, number, setName, setNum, addContact}) => {\n  return (\n    <form onSubmit={addContact}>\n      <div>\n        name: <input value={name} onChange={setName} />\n      </div>\n      <div>\n        number: <input value={number} onChange={setNum} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Notification = ({ message, flag }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className={flag}>\n      {message}\n    </div>\n  )\n}\n\n\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [message, setMessage] = useState(null)\n  const [flag, setFlag] = useState('')\n  const [ filter, setFilter] = useState('')\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  console.log('render', persons.length, 'persons')\n\n\n  const handleName = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNumber = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleFilter = (e) => {\n    setFilter(e.target.value.toLowerCase())\n  }\n\n  const clearDetails = (e) => {\n    e.preventDefault()\n    setNewName('')\n    setNewNumber('')\n  }\n\n  \n  const addName = (e) => {\n    e.preventDefault()\n    const name = {\n      name: newName,\n      number: newNumber,\n    }\n    \n    const names = persons.map(person => person.name)\n    if (names.indexOf(name.name) !== -1){\n      if(window.confirm(`${name.name} is already added to phonebook, replace the old number with a new one?`)){\n        const id = (persons[names.indexOf(name.name)]).id\n        personService\n          .updatePerson(id, name)\n          .then(updatedPersons => {\n            setPersons(updatedPersons)\n            setMessage(`${updatedPersons.find(p => p.id === id).name} updated`)\n            setFlag('message')\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            setMessage(`${newName} no longer exist in the server`)\n            setFlag('error')\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n      }\n    }else{\n      personService\n      .createPerson(name)\n      .then(personCreated => {\n        setMessage(`Added ${personCreated.name}`)\n        setFlag('message')\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n        setPersons(persons.concat(personCreated))\n        setNewName('')\n        setNewNumber('')\n      })\n    }\n  }\n\n  const deleteContact = (id) => {\n    const personToDelete = (persons.filter(person => person.id === id))[0].name\n    if(window.confirm(`Delete ${personToDelete}?`))\n      personService\n        .deletePerson(id)\n        .then((updatedPersons) => {\n          setMessage(`Deleted ${(persons.find(person => person.id === id)).name} successfully`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          console.log(updatedPersons)\n          setPersons(updatedPersons)\n          setFlag('message')\n        }).catch(err => {\n          setMessage('contact cannot be deleted')\n          setFlag('error')\n        })\n  }\n\n\n  return (\n    <>\n      <h2>Phonebook</h2>\n      <Notification message={message} flag={flag} />\n      <Filter filter={filter} onChange={handleFilter} />\n      <h3>Add a new</h3>\n      <PersonForm\n       name={newName} number={newNumber} \n       setName={handleName} setNum={handleNumber}\n       addContact={addName}\n       />\n      <form onSubmit={clearDetails}>\n        <button type=\"submit\">Clear</button>\n      </form>\n      <h3>Numbers</h3>\n      <Persons \n        persons={persons} \n        filter={filter} \n        deleteContact = {deleteContact}\n      />\n    </>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}